(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"RH/3":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".box-content .btn[data-v-469d45d2]{display:inline-block;border-radius:50%;width:2.2rem;height:2.2rem;line-height:2.2rem;padding:0;margin-left:5px;margin-right:5px}h5[data-v-469d45d2]{margin-bottom:0;font-weight:400}.breadcrumb[data-v-469d45d2]{padding:.25rem .7rem!important;margin:0}.box-body button[data-v-469d45d2],.box-body button[data-v-469d45d2]:hover{padding:0;border-radius:50%;width:2.5em;height:2.5em;outline:none}.preview-size[data-v-469d45d2]{width:100%}.file-upload input[data-v-469d45d2]{width:71px;cursor:pointer;position:absolute;top:0;opacity:0}",""])},"YLG/":function(t,e,a){"use strict";a("dHe/")},"dHe/":function(t,e,a){var s=a("zeb6");"string"==typeof s&&(s=[[t.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,o);s.locals&&(t.exports=s.locals)},eYl2:function(t,e,a){"use strict";var s={props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal"},small:{type:Boolean,default:!1},large:{type:Boolean,default:!1},full:{type:Boolean,default:!1},force:{type:Boolean,default:!1},confirmText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},confirmClass:{type:String,default:"btn btn-info"},cancelClass:{type:String,default:"btn btn-light"},closeWhenConfirm:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1}},data:function(){return{duration:null}},computed:{modalClass:function(){return{"modal-lg":this.large,"modal-sm":this.small,"modal-full":this.full}}},created:function(){this.show&&(document.body.className+=" modal-open")},beforeDestroy:function(){document.body.className=document.body.className.replace(/\s?modal-open/,"")},watch:{show:function(t){t?document.body.className+=" modal-open":(this.duration||(this.duration=1e3*window.getComputedStyle(this.$el)["transition-duration"].replace("s","")),window.setTimeout((function(){document.body.className=document.body.className.replace(/\s?modal-open/,"")}),this.duration||0))}},methods:{confirm:function(){this.$emit("confirm")},cancel:function(){this.$emit("cancel")},clickMask:function(){this.force||this.cancel()}}},o=(a("YLG/"),a("KHd+")),l=Object(o.a)(s,(function(){var t=this,e=t._self._c;return t.show?e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickMask.apply(null,arguments)}}},[e("div",{staticClass:"modal-dialog",class:t.modalClass},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[t._t("header",(function(){return[e("h4",{staticClass:"modal-title"},[t._t("title",(function(){return[t._v("\n                "+t._s(t.title)+"\n              ")]}))],2),t._v(" "),e("a",{staticClass:"close",on:{click:t.cancel}},[e("i",{staticClass:"fas fa-times-circle"})])]}))],2),t._v(" "),e("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),t.showFooter?e("div",{staticClass:"modal-footer"},[t._t("footer",(function(){return[e("button",{class:t.cancelClass,attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.cancelText))]),t._v(" "),e("button",{class:t.confirmClass,attrs:{type:"button"},on:{click:t.confirm}},[t._v(t._s(t.confirmText))])]}))],2):t._e()])])])]):t._e()}),[],!1,null,"b52a260c",null);e.a=l.exports},g6D4:function(t,e,a){"use strict";a.r(e);var s={components:{Modal:a("eYl2").a},data:function(){return{folder:"",files:null,file_name:"",path:"",upload:{},showFolder:!1,showFile:!1,showImage:!1,preview_image:"",fields:[{name:"name",title:"ID",titleClass:"text-center",dataClass:"text-center"},{name:"user",title:"User Name",titleClass:"text-center",dataClass:"text-center",callback:"username"},{name:"title",title:"Title"},{name:"content",title:"Content",callback:"content"},{name:"status",title:"Status",titleClass:"text-center",dataClass:"text-center",callback:"status"},{name:"created_at",title:"Created At"},{name:"__actions",dataClass:"text-center"}]}},mounted:function(){this.getFileInfo(this.$route.query.folder)},methods:{preview:function(t){this.showImage=!0,this.preview_image=t},confirm:function(){var t=this;if(this.folder){var e="/"==this.upload.folder?"":this.upload.folder;this.path=e+"/"+this.folder,this.$http.post("folder",{folder:this.path}).then((function(e){toastr.success("You create a new folder success!"),t.showFolder=!1,t.$set(t.upload.subfolders,t.path,t.folder),t.folder=""})).catch((function(t){var e=t.response;toastr.error(e.status+" : "+e.statusText)}))}else toastr.error("The folder name must be required!")},change:function(t){this.files=t.target.files},uploadFile:function(){var t=this;if(this.files){var e=new FormData;e.append("file",this.files[0]),e.append("name",this.file_name),e.append("folder",this.upload.folder),this.$http.post("upload",e).then((function(e){toastr.success("You upload a file success!");var a={fullPath:e.data.real_path,mimeType:e.data.mime,name:e.data.original_name,size:e.data.size,webPath:e.data.url};t.upload.files.push(a),t.file_name="",t.showFile=!1})).catch((function(t){var e=t.response;e.data.error?toastr.error(e.data.error.message):toastr.error(e.status+" : Resource "+e.statusText)}))}else toastr.error("The file must be required")},deleteFolder:function(t){var e=this,a="/"==this.upload.folder?"":this.upload.folder;this.$http.post("folder/delete",{del_folder:t,folder:this.upload.folder}).then((function(s){toastr.success("You delete a folder success!"),e.$delete(e.upload.subfolders,a+"/"+t)})).catch((function(t){var e=t.response;e.data.error?toastr.error(e.data.error.http_code+" : Resource "+e.data.error.message):toastr.error(e.status+" : Resource "+e.statusText)}))},deleteFile:function(t,e){var a=this;this.$http.post("file/delete",{path:t.fullPath}).then((function(t){toastr.success("You delete a file success!"),a.upload.files.splice(e,1)})).catch((function(t){var e=t.response;toastr.error(e.status+" : Resource "+e.statusText)}))},getFileInfo:function(t){var e=this,a="upload";t?a=a+"?folder="+t:t="/",this.$http.get(a).then((function(a){e.upload=a.data.data,e.upload.subfolders instanceof Array&&(e.upload.subfolders={}),e.$router.push({name:"dashboard.file",query:{folder:t}})}))},checkImageType:function(t){return null!=t&&-1!=t.indexOf("image/")}}},o=(a("lgMg"),a("KHd+")),l=Object(o.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"box"},[e("div",{staticClass:"box-title"},[e("div",{staticClass:"row d-flex m-0"},[e("div",{staticClass:"col-md-6 d-flex align-items-center p-0"},[e("h5",{staticClass:"align-self-center"},[t._v(t._s(t.$t("page.files"))+"  ")]),t._v(" "),e("div",{staticClass:"float-left"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb"},[t._l(t.upload.breadcrumbs,(function(a,s){return e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.getFileInfo(s)}}},[t._v("\n                    "+t._s(a)+"\n                  ")])])})),t._v(" "),e("li",{staticClass:"breadcrumb-item active"},[t._v(t._s(t.upload.folderName))])],2)])])]),t._v(" "),e("div",{staticClass:"col-md-6 align-items-center p-0 text-right"},[e("small",[t.checkPermission("CREATE_FILE_FOLDER")?e("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showFolder=!0}}},[e("i",{staticClass:"fas fa-plus-circle"}),t._v(" "+t._s(t.$t("table.new_folder"))+"\n            ")]):t._e(),t._v(" "),t.checkPermission("UPLOAD_FILE")?e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.showFile=!0}}},[e("i",{staticClass:"fas fa-inbox"}),t._v(" "+t._s(t.$t("table.upload"))+"\n            ")]):t._e()])])])]),t._v(" "),e("div",{staticClass:"box-content p-0"},[e("table",{staticClass:"table table-striped table-hover",attrs:{id:"uploads-table"}},[e("tbody",[e("tr",[e("th",[t._v(t._s(t.$t("table.name")))]),t._v(" "),e("th",[t._v(t._s(t.$t("table.type")))]),t._v(" "),e("th",[t._v(t._s(t.$t("table.date")))]),t._v(" "),e("th",[t._v(t._s(t.$t("table.size")))]),t._v(" "),e("th",[t._v(t._s(t.$t("table.action")))])]),t._v(" "),t._l(t.upload.subfolders,(function(a,s){return e("tr",[e("td",[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.getFileInfo(s)}}},[e("i",{staticClass:"fas fa-folder"}),t._v("\n                "+t._s(a)+"\n              ")])]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[e("a",{staticClass:"btn btn-sm btn-secondary",attrs:{href:"javascript:;"},on:{click:function(e){return t.getFileInfo(s)}}},[e("i",{staticClass:"fas fa-folder-open"})]),t._v(" "),t.checkPermission("DESTROY_FILE")?e("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteFolder(a)}}},[e("i",{staticClass:"fas fa-trash-alt"})]):t._e()])])})),t._v(" "),t._l(t.upload.files,(function(a,s){return e("tr",["folder"==a.type?[e("td",[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.getFileInfo(a.fullPath)}}},[e("i",{staticClass:"fas fa-folder"}),t._v("\n                  "+t._s(a.name)+"\n                ")])]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[t._v("-")]),t._v(" "),e("td",[e("a",{staticClass:"btn btn-sm btn-secondary",attrs:{href:"javascript:;"},on:{click:function(e){return t.getFileInfo(a.fullPath)}}},[e("i",{staticClass:"fas fa-folder-open"})]),t._v(" "),t.checkPermission("DESTROY_FILE")?e("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteFolder(a.fullPath)}}},[e("i",{staticClass:"fas fa-trash-alt"})]):t._e()])]:[e("td",[e("a",{attrs:{target:"_blank",href:a.webPath}},[t.checkImageType(a.mimeType)?e("i",{staticClass:"fas fa-image"}):e("i",{staticClass:"fas fa-file-alt"}),t._v("\n                  "+t._s(a.name)+"\n                ")])]),t._v(" "),e("td",[t._v(t._s(a.mimeType))]),t._v(" "),e("td",[t._v(t._s(a.modified))]),t._v(" "),e("td",[t._v(t._s(a.size))]),t._v(" "),e("td",[t.checkImageType(a.mimeType)?e("button",{staticClass:"btn btn-sm btn-info",attrs:{type:"button"},on:{click:function(e){return t.preview(a.webPath)}}},[e("i",{staticClass:"fas fa-eye"})]):t._e(),t._v(" "),t.checkPermission("DESTROY_FILE")?e("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteFile(a,s)}}},[e("i",{staticClass:"fas fa-trash-alt"})]):t._e()])]],2)}))],2)])])]),t._v(" "),e("modal",{attrs:{show:t.showFolder,"show-footer":""},on:{confirm:t.confirm,cancel:function(e){t.showFolder=!1}}},[e("template",{slot:"title"},[t._v(t._s(t.$t("form.create_folder")))]),t._v(" "),e("form",[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-form-label col-sm-3",attrs:{for:"folder"}},[t._v(t._s(t.$t("form.folder_name")))]),t._v(" "),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.folder,expression:"folder"}],staticClass:"form-control",attrs:{type:"text",id:"folder",placeholder:t.$t("form.folder_name")},domProps:{value:t.folder},on:{input:function(e){e.target.composing||(t.folder=e.target.value)}}})])])])],2),t._v(" "),e("modal",{attrs:{show:t.showFile,"show-footer":""},on:{confirm:t.uploadFile,cancel:function(e){t.showFile=!1}}},[e("template",{slot:"title"},[t._v(t._s(t.$t("form.upload_file")))]),t._v(" "),e("form",{attrs:{enctype:"multipart/form-data"}},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-form-label col-sm-3",attrs:{for:"file"}},[t._v(t._s(t.$t("form.file")))]),t._v(" "),e("div",{staticClass:"col-sm-8 file-upload"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v(t._s(t.$t("table.upload")))]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"file",id:"file",name:"file"},on:{change:t.change}})])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-form-label col-sm-3",attrs:{for:"file_name"}},[t._v(t._s(t.$t("form.file_name")))]),t._v(" "),e("div",{staticClass:"col-sm-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.file_name,expression:"file_name"}],staticClass:"form-control",attrs:{type:"text",id:"file_name",name:"file_name",placeholder:t.$t("form.file_name")},domProps:{value:t.file_name},on:{input:function(e){e.target.composing||(t.file_name=e.target.value)}}})])])])],2),t._v(" "),e("modal",{attrs:{show:t.showImage},on:{confirm:t.confirm,cancel:function(e){t.showImage=!1}}},[e("template",{slot:"title"},[t._v(t._s(t.$t("form.image")))]),t._v(" "),e("div",{staticClass:"col-sm-12 text-center"},[e("img",{staticClass:"preview-size",attrs:{src:t.preview_image}})])],2)],1)}),[],!1,null,"469d45d2",null);e.default=l.exports},lgMg:function(t,e,a){"use strict";a("vMGN")},vMGN:function(t,e,a){var s=a("RH/3");"string"==typeof s&&(s=[[t.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,o);s.locals&&(t.exports=s.locals)},zeb6:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".modal[data-v-b52a260c]{display:block;background-color:rgba(0,0,0,.5);transition:opacity .3s ease}.modal-header[data-v-b52a260c]{padding-bottom:25px;border:none}.modal-dialog[data-v-b52a260c]{vertical-align:middle;margin:30px auto}.modal-content[data-v-b52a260c]{background-color:#fff;border-radius:5px;box-shadow:0 2px 8px rgba(0,0,0,.33);transition:all .3s ease;font-family:Helvetica,Arial,sans-serif}.modal-enter .modal-content[data-v-b52a260c],.modal-leave-active .modal-content[data-v-b52a260c]{transform:scale(1.1)}",""])}}]);