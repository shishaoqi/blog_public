(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"1GJp":function(s,t,i){"use strict";function e(s){if("string"==typeof s.data)toastr.error(s.status+" "+s.statusText);else{var t=s.data.errors,i="";Object.keys(t).map((function(s,e){var o=t[s];i+='<span style="color: #e74c3c">'+o[0]+"</span><br>"})),swal({title:"Error Text!",type:"error",html:i})}}i.d(t,"a",(function(){return e}))},b8aM:function(s,t,i){"use strict";var e=i("1GJp"),o=i("Kbl0"),a=i.n(o),n=i("jl8+"),c={components:{Multiselect:i.n(n).a},props:{discussion:{type:Object,default:function(){return{}}}},data:function(){return{simplemde:{},tags:null,allTag:[]}},computed:{mode:function(){return this.discussion.id?"update":"create"}},created:function(){this.loadTags()},watch:{discussion:function(){this.tags=this.discussion.tags.data,this.simplemde.value(this.discussion.content_raw)}},mounted:function(){var s=this.$t||this.$i18n.t;this.simplemde=new a.a({element:document.getElementById("editor"),placeholder:s("form.content_placeholder",{type:s("form.discussion")}),autoDownloadFontAwesome:!0})},methods:{loadTags:function(){var s=this;this.$http.get("tags").then((function(t){s.allTag=t.data.data}))},onSubmit:function(){var s=this;if(0!=this.tags.length){for(var t=[],i="discussion"+(this.discussion.id?"/"+this.discussion.id:""),o=this.discussion.id?"patch":"post",a=0;a<this.tags.length;a++)t[a]=this.tags[a].id;this.discussion.tags=JSON.stringify(t),this.discussion.content=this.simplemde.value(),this.$http[o](i,this.discussion).then((function(t){toastr.success("You "+s.mode+"d the discussion success!"),s.$router.push({name:"dashboard.discussion"})})).catch((function(s){var t=s.response;Object(e.a)(t)}))}else toastr.error("Tag must select one or more.")}}},l=i("KHd+"),r=Object(l.a)(c,(function(){var s=this,t=s._self._c;return t("div",{staticClass:"row"},[t("form",{staticClass:"col-sm-9 offset-sm-1",on:{submit:function(t){return t.preventDefault(),s.onSubmit.apply(null,arguments)}}},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"title"}},[s._v(s._s(s.$t("form.title")))]),s._v(" "),t("div",{staticClass:"col-sm-10"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.discussion.title,expression:"discussion.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",name:"title"},domProps:{value:s.discussion.title},on:{input:function(t){t.target.composing||s.$set(s.discussion,"title",t.target.value)}}})])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label"},[s._v(s._s(s.$t("form.tag")))]),s._v(" "),t("div",{staticClass:"col-sm-10"},[t("multiselect",{attrs:{options:s.allTag,multiple:!0,searchable:!0,"hide-selected":!0,"close-on-select":!1,"clear-on-select":!1,limit:5,placeholder:s.$t("form.select_tag"),label:"tag","track-by":"tag"},model:{value:s.tags,callback:function(t){s.tags=t},expression:"tags"}})],1)]),s._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"title"}},[s._v(s._s(s.$t("form.content")))]),s._v(" "),s._m(0)]),s._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-2 col-form-label"},[s._v("\n        "+s._s(s.$t("form.status"))+"\n      ")]),s._v(" "),t("div",{staticClass:"col-sm-2"},[t("div",{staticClass:"togglebutton",staticStyle:{"margin-top":"6px"}},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.discussion.status,expression:"discussion.status"}],attrs:{type:"checkbox",name:"status",value:"1"},domProps:{checked:Array.isArray(s.discussion.status)?s._i(s.discussion.status,"1")>-1:s.discussion.status},on:{change:function(t){var i=s.discussion.status,e=t.target,o=!!e.checked;if(Array.isArray(i)){var a=s._i(i,"1");e.checked?a<0&&s.$set(s.discussion,"status",i.concat(["1"])):a>-1&&s.$set(s.discussion,"status",i.slice(0,a).concat(i.slice(a+1)))}else s.$set(s.discussion,"status",o)}}}),s._v(" "),t("span",{staticClass:"toggle"})])])])]),s._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"offset-sm-2 col-sm-10"},[t("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[s._v(s._s(s.discussion.id?s.$t("form.edit"):s.$t("form.create")))])])])])])}),[function(){var s=this._self._c;return s("div",{staticClass:"col-sm-10"},[s("textarea",{attrs:{id:"editor",name:"content"}})])}],!1,null,null,null);t.a=r.exports},vsVs:function(s,t,i){"use strict";i.r(t);var e={components:{DiscussionForm:i("b8aM").a},data:function(){return{discussion:void 0}},mounted:function(){this.loadDiscussion()},methods:{loadDiscussion:function(){var s=this;this.$http.get("discussion/"+this.$route.params.id+"/edit?include=tags").then((function(t){s.discussion=t.data.data}))}}},o=i("KHd+"),a=Object(o.a)(e,(function(){var s=this._self._c;return s("vue-form",{attrs:{title:this.$t("form.edit_discussion")}},[s("template",{slot:"buttons"},[s("router-link",{staticClass:"btn btn-sm btn-secondary",attrs:{to:{name:"dashboard.discussion"},exact:""}},[this._v(this._s(this.$t("form.back")))])],1),this._v(" "),s("template",{slot:"content"},[s("discussion-form",{attrs:{discussion:this.discussion}})],1)],2)}),[],!1,null,null,null);t.default=a.exports}}]);